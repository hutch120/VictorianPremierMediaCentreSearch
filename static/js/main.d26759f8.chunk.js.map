{"version":3,"sources":["utils/service.js","queries/getQueryByTitle.js","Table.js","Styling.js","components/DateInfo.js","licence.js","App.js","reportWebVitals.js","index.js"],"names":["post","a","url","data","failed","window","fetch","method","headers","body","JSON","stringify","response","json","console","log","error","success","getQueryByTitle","query","bool","must","multi_match","fields","filter","terms","type","field_node_site","should","match_phrase","title","boost","sort","field_news_date","_score","aggs","field_minister_name","field","order","_key","size","options","responsive","selectableRowsHeader","selectableRowsHideCheckboxes","Table","columns","Outer","styled","div","Inner","Center","MainTitle","h1","SubTitle","h2","LinkPremiers","TableLink","SearchButton","button","props","primary","SearchInput","input","inputColor","DateInfo","value","mDate","moment","timeAgoText","format","valueOf","propTypes","PropTypes","string","SEARCH_ENDPOINT","App","useState","setQuery","tableData","setTableData","name","label","customBodyRenderLite","dataIndex","rowIndex","date","href","rel","target","search","result","_tableData","hits","iHit","length","hit","_source","row","push","onChange","evt","newQuery","onClick","loading","width","height","src","style","position","top","left","alt","data-recalc-dims","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.d26759f8.chunk.js","sourcesContent":["export async function get ({ url = '' }) {\r\n  if (url === '') return failed('Invalid url')\r\n  try {\r\n    const response = await window.fetch(url)\r\n    return await response.json()\r\n  } catch (err) {\r\n    console.log('Failed to fetch data')\r\n  }\r\n  return failed('Fetch get failed')\r\n}\r\n\r\n// Example POST method implementation:\r\nexport async function post (url = '', data = {}) {\r\n  if (url === '') return failed('Invalid url')\r\n  try {\r\n  // Default options are marked with *\r\n    const response = await window.fetch(url, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify(data) // body data type must match \"Content-Type\" header\r\n    })\r\n    return response.json() // parses JSON response into native JavaScript objects\r\n  } catch (err) {\r\n    console.log('Fetch error', err)\r\n  }\r\n  return failed('Fetch post failed')\r\n}\r\n\r\nfunction failed (error) {\r\n  return { success: false, error }\r\n}\r\n","export function getQueryByTitle (query) {\r\n  return {\r\n    query: {\r\n      bool: {\r\n        must: {\r\n          multi_match: {\r\n            query: query,\r\n            fields: [\r\n              'title'\r\n            ]\r\n          }\r\n        },\r\n        filter: [\r\n          {\r\n            terms: {\r\n              type: [\r\n                'news'\r\n              ]\r\n            }\r\n          },\r\n          {\r\n            terms: {\r\n              field_node_site: [\r\n                '4'\r\n              ]\r\n            }\r\n          }\r\n        ],\r\n        should: {\r\n          match_phrase: {\r\n            title: {\r\n              query: query,\r\n              boost: 2\r\n            }\r\n          }\r\n        }\r\n      }\r\n    },\r\n    sort: [\r\n      {\r\n        field_news_date: 'desc'\r\n      },\r\n      {\r\n        _score: 'desc'\r\n      }\r\n    ],\r\n    aggs: {\r\n      field_minister_name: {\r\n        terms: {\r\n          field: 'field_minister_name',\r\n          order: {\r\n            _key: 'asc'\r\n          },\r\n          size: 100\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n","import MUIDataTable from 'mui-datatables'\r\n\r\nconst options = {\r\n  responsive: 'standard',\r\n  selectableRowsHeader: false,\r\n  selectableRowsHideCheckboxes: true\r\n}\r\n\r\nexport function Table ({ columns, data }) {\r\n  return (\r\n    <MUIDataTable\r\n      title='Items'\r\n      data={data}\r\n      columns={columns}\r\n      options={options}\r\n    />\r\n  )\r\n}\r\n","import styled from 'styled-components'\r\n\r\nexport const Outer = styled.div`\r\nmargin: auto;\r\nbackground: papayawhip;\r\n`\r\n\r\nexport const Inner = styled.div`\r\nmax-width: 800px;\r\nmargin: auto;\r\npadding: 4em;\r\n`\r\n\r\nexport const Center = styled.div`\r\ntext-align: center;\r\n`\r\n\r\nexport const MainTitle = styled.h1`\r\nfont-size: 1.5em;\r\ntext-align: center;\r\ncolor: palevioletred;\r\n`\r\n\r\nexport const SubTitle = styled.h2`\r\nfont-size: 1.0em;\r\ntext-align: center;\r\ncolor: palevioletred;\r\n`\r\n\r\nexport const LinkPremiers = styled.a`\r\ncolor: palevioletred;\r\nfont-weight: bold;\r\n`\r\n\r\nexport const TableLink = styled.a`\r\n\r\n`\r\n\r\nexport const SearchButton = styled.button`\r\n/* Adapt the colors based on primary prop */\r\nbackground: ${props => props.primary ? 'palevioletred' : 'white'};\r\ncolor: ${props => props.primary ? 'white' : 'palevioletred'};\r\n\r\nfont-size: 1em;\r\nmargin: 1em;\r\npadding: 0.25em 1em;\r\nborder: 2px solid palevioletred;\r\nborder-radius: 3px;\r\n`\r\n\r\nexport const SearchInput = styled.input`\r\nwidth: 60%;\r\npadding: 0.5em;\r\nmargin: 0.5em;\r\ncolor: ${props => props.inputColor || 'palevioletred'};\r\nbackground: white;\r\nborder: none;\r\nborder-radius: 3px;\r\n`\r\n","import moment from 'moment'\r\nimport { format } from 'timeago.js'\r\nimport PropTypes from 'prop-types'\r\n\r\nexport function DateInfo ({ value }) {\r\n  if (value && value !== '') {\r\n    const mDate = moment(value)\r\n    const timeAgoText = 'over ' + format(mDate.valueOf())\r\n    return `${timeAgoText} (${value})`\r\n  } else {\r\n    return null\r\n  }\r\n}\r\n\r\nDateInfo.propTypes = {\r\n  value: PropTypes.string\r\n}\r\n","\r\nexport const licence = `\r\nThis site is not affilated or endorsed by the Premier's office.\r\nhttps://www.premier.vic.gov.au\r\n\r\nMIT License\r\n\r\nCopyright (c) 2021 Simon Hutchison\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all\r\ncopies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\nSOFTWARE.\r\n`\r\n","import React, { useState } from 'react'\nimport './App.css'\nimport { post } from './utils/service'\nimport { getQueryByTitle } from './queries/getQueryByTitle'\nimport { Table } from './Table'\nimport { Outer, Inner, MainTitle, SubTitle, LinkPremiers, SearchButton, SearchInput, TableLink, Center } from './Styling'\nimport LinkIcon from '@material-ui/icons/Link'\nimport { DateInfo } from './components/DateInfo'\nimport { licence } from './licence'\n\nconst SEARCH_ENDPOINT = 'https://70a9ae2679d731ae30ca5f7b206a27b8.elastic.sdp1.sdp.vic.gov.au/elasticsearch_index_drupal_node/_search?from=0&size=9&filter_path=hits.hits,hits.total,aggregations&_source=body,field_news_date,field_media_image_absolute_path,field_node_primary_site,summary_processed,field_type_name,title,type,url'\n\nfunction App () {\n  const [query, setQuery] = useState('')\n  const [tableData, setTableData] = useState(null)\n\n  const columns = [{\n    name: 'title',\n    label: 'Title'\n  },\n  {\n    name: 'date',\n    label: 'Date',\n    options: {\n      customBodyRenderLite: function RenderDateInfo (dataIndex, rowIndex) {\n        return <DateInfo value={tableData[dataIndex].date} />\n      }\n    }\n  },\n  {\n    name: 'Link',\n    label: 'Link',\n    options: {\n      customBodyRenderLite: function RenderLocationButton (dataIndex, rowIndex) {\n        return <TableLink href={tableData[dataIndex].url} rel='noreferrer' target='_blank'><LinkIcon /></TableLink>\n      }\n    }\n  }]\n\n  async function search (query) {\n    if (query && query !== '') {\n      setQuery(query)\n      console.log('query', query)\n      const data = getQueryByTitle(query)\n      const result = await post(SEARCH_ENDPOINT, data)\n      console.log('result', result)\n      const _tableData = []\n      const hits = result?.hits?.hits ?? []\n      for (let iHit = 0; iHit < hits.length; iHit++) {\n        const hit = hits[iHit]\n        const url = `https://www.premier.vic.gov.au/${hit?._source?.url[0]}`\n        const row = { title: hit?._source?.title[0], date: hit?._source?.field_news_date[0], url }\n        _tableData.push(row)\n      }\n      setTableData(_tableData)\n    } else {\n      console.log('Invalid query')\n    }\n  }\n\n  return (\n    <Outer>\n      <Inner>\n\n        <MainTitle>Search Premier of Victoria <LinkPremiers href='https://www.premier.vic.gov.au/media-centre'>Media Centre</LinkPremiers></MainTitle>\n        <SubTitle>Either enter text in box, and click Search By Title, OR press a find button.</SubTitle>\n\n        <Center>\n          <SearchInput\n            type='text' inputColor='rebeccapurple' value={query} onChange={(evt) => {\n              const newQuery = evt?.target?.value\n              setQuery(newQuery)\n            }}\n          />\n          <SearchButton onClick={() => search(query)}>Search By Title</SearchButton>\n        </Center>\n\n        <Center>\n          <SearchButton onClick={() => search('Restrictions')}>Find Restrictions</SearchButton>\n        </Center>\n\n        {tableData &&\n          <Center>\n            <SubTitle>Click the link icon to load that page in a new tab.</SubTitle>\n            <Table columns={columns} data={tableData} />\n          </Center>}\n\n        <Center>\n          <pre>\n            {licence}\n          </pre>\n        </Center>\n        <a href='https://github.com/hutch120/VictorianPremierMediaCentreSearch'>\n          <img\n            loading='lazy' width='149' height='149'\n            src='https://github.blog/wp-content/uploads/2008/12/forkme_left_orange_ff7600.png?resize=149%2C149'\n            style={{ position: 'absolute', top: 0, left: 0 }} alt='Fork me on GitHub' data-recalc-dims='1'\n          />\n        </a>\n      </Inner>\n    </Outer>\n  )\n}\n\nexport default App\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\nimport reportWebVitals from './reportWebVitals'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n"],"sourceRoot":""}